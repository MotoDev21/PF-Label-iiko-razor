# PF-Label-iiko-razor
# Шаблон этикетки для печати ПФ (полуфабрикатов) в iiko Razor
![image](https://github.com/user-attachments/assets/ead8e340-2045-4e14-9351-b3517d02edc7)

## Описание
Данный шаблон предназначен для создания этикеток полуфабрикатов (ПФ) в системе iiko с использованием Razor-синтаксиса. Этикетка содержит основную информацию о продукте, такую как название, время приготовления, срок хранения, данные о сотруднике, который выполнил приготовление, а также дополнительные параметры, такие как штрих-код с датой окончания срока годности.


## Структура шаблона

### Используемые библиотеки
```csharp
@using System.Collections.Generic;
```
Подключается пространство имен `System.Collections.Generic` для работы с коллекциями данных.

### Наследование
```csharp
@inherits Resto.Front.PrintTemplates.Cheques.Razor.TemplateBase<Resto.Front.PrintTemplates.Cheques.Razor.TemplateModels.IPriceTicket>
```
Шаблон наследует базовый класс `TemplateBase` с моделью данных `IPriceTicket`, которая предоставляет доступ к информации о продукте, времени приготовления, пользователе и других параметров.

---

## Элементы шаблона

### 1. Заголовок (Название продукта)
```razor
<f1>
  <center>
    @Model.Product.Name
  </center>
</f1>
```
- Отображает название продукта в центре этикетки.
- `@Model.Product.Name` — получает название продукта из модели данных.

### 2. Время приготовления
```razor
<left><f0>@string.Format("Время приготовления {1}", Resources.PrintTimeColon, FormatFullDateTime(Model.CommonInfo.CurrentTime))</f0></left>
```
- Показывает текущее время приготовления продукта.
- `FormatFullDateTime(Model.CommonInfo.CurrentTime)` — форматирует текущее время в удобочитаемый вид.

### 3. Срок хранения
```razor
<left><wrap><f0>Срок хранения: @Model.Product.ExpirationPeriod.Hours ч. @Model.Product.ExpirationPeriod.Minutes мин.</f0></wrap></left>
```
- Отображает срок хранения продукта в часах и минутах.
- `@Model.Product.ExpirationPeriod.Hours` и `@Model.Product.ExpirationPeriod.Minutes` — значения, полученные из модели.

### 4. Штрих-код с датой окончания срока годности
```razor
@if (Model.Product.ExpirationPeriod.Ticks > 0)
{
  <left><f0>
    @string.Join(" ", Resources.BarcodeExpiration, FormatLongDateTime(Model.CommonInfo.CurrentTime + Model.Product.ExpirationPeriod)) 
  </f0></left>
}
else
{
  <left><f0>Время окончания не задано</f0></left>
}
```
- Если срок хранения задан, выводится штрих-код с датой окончания срока годности.
- Если срок хранения не задан, выводится сообщение "Время окончания не задано".

### 5. Информация о сотруднике
```razor
<left><f0>@string.Format("Кто приготовил: {0}", Model.CommonInfo.CurrentUser.Name)</f0></left>
```
- Отображает имя сотрудника, который выполнил приготовление продукта.
- `@Model.CommonInfo.CurrentUser.Name` — получает имя текущего пользователя из модели.

---

## Настройка и использование

### Установка
1. Скопируйте текст шаблона с расширением `.cs`.
2. Загрузите шаблон в систему iiko через интерфейс администрирования.
3. Настройте принтер, который будет использоваться для печати этикеток.

### Параметры настройки
- **Размер этикетки**: Убедитесь, что размер этикетки соответствует настройкам принтера.
- **Формат даты и времени**: При необходимости измените форматирование даты и времени в методах `FormatFullDateTime` и `FormatLongDateTime`.

---

## Пример вывода

### Входные данные
- Название продукта: "Котлеты по-домашнему"
- Время приготовления: 14:30
- Срок хранения: 4 часа 30 минут
- Сотрудник: Иван Иванов

### Результат
```
Котлеты по-домашнему

Время приготовления: 14:30
Срок хранения: 4 ч. 30 мин.
Штрих-код: 2023-10-01 19:00
Кто приготовил: Иван Иванов
```
